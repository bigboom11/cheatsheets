{"id":"wrapify/index.js","dependencies":[{"name":"/root/github/cheatsheets/.babelrc","includedInParent":true,"mtime":1688464615031},{"name":"/root/github/cheatsheets/package.json","includedInParent":true,"mtime":1688520553682},{"name":"dom101/matches","loc":{"line":1,"column":20,"index":20},"parent":"/root/github/cheatsheets/_parcel/wrapify/index.js","resolved":"/root/github/cheatsheets/node_modules/dom101/matches.js"},{"name":"dom101/add-class","loc":{"line":2,"column":21,"index":58},"parent":"/root/github/cheatsheets/_parcel/wrapify/index.js","resolved":"/root/github/cheatsheets/node_modules/dom101/add-class.js"},{"name":"../helpers/dom","loc":{"line":9,"column":7,"index":158},"parent":"/root/github/cheatsheets/_parcel/wrapify/index.js","resolved":"/root/github/cheatsheets/_parcel/helpers/dom.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = wrapify;\nexports.groupify = groupify;\nvar _matches = _interopRequireDefault(require(\"dom101/matches\"));\nvar _addClass = _interopRequireDefault(require(\"dom101/add-class\"));\nvar _dom = require(\"../helpers/dom\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/**\n * Wraps h2 sections into h2-section.\n * Wraps h3 sections into h3-section.\n *\n * @private\n */\n\nfunction wrapify(root) {\n  // These are your H2 sections. Returns a list of .h2-section nodes.\n  var sections = wrapifyH2(root);\n\n  // For each h2 section, wrap the H3's in them\n  sections.forEach(function (section) {\n    var bodies = (0, _dom.findChildren)(section, '[data-js-h3-section-list]');\n    bodies.forEach(function (body) {\n      wrapifyH3(body);\n    });\n  });\n}\n\n/**\n * Wraps h2 sections into h2-section.\n * Creates and HTML structure like so:\n *\n *     .h2-section\n *       h2.\n *         (title)\n *       .body.h3-section-list.\n *         (body goes here)\n *\n * @private\n */\n\nfunction wrapifyH2(root) {\n  return groupify(root, {\n    tag: 'h2',\n    wrapperFn: function wrapperFn() {\n      return (0, _dom.createDiv)({\n        class: 'h2-section'\n      });\n    },\n    bodyFn: function bodyFn() {\n      return (0, _dom.createDiv)({\n        class: 'body h3-section-list',\n        'data-js-h3-section-list': ''\n      });\n    }\n  });\n}\n\n/**\n * Wraps h3 sections into h3-section.\n * Creates and HTML structure like so:\n *\n *     .h3-section\n *       h3.\n *         (title)\n *       .body.\n *         (body goes here)\n *\n * @private\n */\n\nfunction wrapifyH3(root) {\n  return groupify(root, {\n    tag: 'h3',\n    wrapperFn: function wrapperFn() {\n      return (0, _dom.createDiv)({\n        class: 'h3-section'\n      });\n    },\n    bodyFn: function bodyFn() {\n      return (0, _dom.createDiv)({\n        class: 'body'\n      });\n    }\n  });\n}\n\n/**\n * Groups all headings (a `tag` selector) under wrappers like `.h2-section`\n * (build by `wrapperFn()`).\n * @private\n */\n\nfunction groupify(el, _ref) {\n  var tag = _ref.tag,\n    wrapperFn = _ref.wrapperFn,\n    bodyFn = _ref.bodyFn;\n  var first = el.children[0];\n  var result = [];\n\n  // Handle the markup before the first h2\n  if (first && !(0, _matches.default)(first, tag)) {\n    var sibs = (0, _dom.nextUntil)(first, tag);\n    result.push(wrap(first, null, [first].concat(_toConsumableArray(sibs))));\n  }\n\n  // Find all h3's inside it\n  var children = (0, _dom.findChildren)(el, tag);\n  children.forEach(function (child) {\n    var sibs = (0, _dom.nextUntil)(child, tag);\n    result.push(wrap(child, child, sibs));\n  });\n  return result;\n  function wrap(pivot, first, sibs) {\n    var wrap = wrapperFn();\n    var pivotClass = pivot.className;\n    if (pivotClass) (0, _addClass.default)(wrap, pivotClass);\n    (0, _dom.before)(pivot, wrap);\n    var body = bodyFn();\n    if (pivotClass) (0, _addClass.default)(body, pivotClass);\n    (0, _dom.appendMany)(body, sibs);\n    if (first) wrap.appendChild(first);\n    wrap.appendChild(body);\n    return wrap;\n  }\n}"},"sourceMaps":null,"error":null,"hash":"b4736841cb758df77a95a2c3b3e0ff3d","cacheData":{"env":{}}}